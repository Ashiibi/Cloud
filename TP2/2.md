üåû Tester cloud-init

en cr√©ant une nouvelle VM et en lui passant ce fichier cloud-init.txt au d√©marrage
pour √ßa, utilisez une commande az vm create

utilisez l'option --custom-data /path/to/cloud-init.txt
```
#cloud-config
users:
  - default
  - name: sacha
    sudo: false
    shell: /bin/bash
    ssh_authorized_keys:
      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDF3njhiwHUWFtFgq2Aobyrhw/NekaUpjMA31hM42cRAbg07YGQLIevHuDYj/Nb4q0cOw7VU
```
```
PS C:\Users\sacha> az vm create -g MurkyDivers -n partie2 --image Ubuntu2204 --admin-username sacha --ssh-key-values "C:\Users\sacha\.ssh\id_rsa.pub" --custom-data "C:\Users\sacha\OneDrive\Documents\cloud-init.txt"
Selecting "uksouth" may reduce your costs.‚ÄØThe region you've selected may cost more for the same services. You can disable this message in the future with the command "az config set core.display_region_identified=false". Learn more at https://go.microsoft.com/fwlink/?linkid=222571

{
  "fqdns": "",
  "id": "/subscriptions/672afa01-c969-4945-b2a1-f36ed2424d6a/resourceGroups/MurkyDivers/providers/Microsoft.Compute/virtualMachines/partie2",
  "location": "westeurope",
  "macAddress": "60-45-BD-A1-8D-FC",
  "powerState": "VM running",
  "privateIpAddress": "10.0.0.4",
  "publicIpAddress": "20.16.53.115",
  "resourceGroup": "MurkyDivers",
  "zones": ""
}
```
üåû V√©rifier que cloud-init a bien fonctionn√©

connectez-vous en SSH √† la VM nouvellement cr√©√©e, directement sur le nouvel utilisateur cr√©√© par cloud-init
```
sacha@partie2:~$
```

üåû Utilisez cloud-init pour pr√©configurer la VM :

installer Docker sur la machine
ajoutez un user qui porte votre pseudo

il a un password d√©fini
cl√© SSH publique d√©pos√©e
il a acc√®s aux droits de root via sudo

membre du groupe docker

l'image Docker alpine:latest doit √™tre t√©l√©charg√©e
```
users:
  - name: Ashiibi
    sudo: ALL=(ALL) NOPASSWD:ALL
    groups: sudo, docker
    passwd: "$6$fCJshzod./yiwUeR$AhS5E78GR6uWY1iZO7yC9NiA3ky7t5DU3ZyDbQTXbqeRvpDBxWZaizm6F68O0dUHurt7LCEG4sYHyeGkNSzsL."
    shell: /bin/bash
    ssh_authorized_keys:
    - "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDF3njhiwHUWFtFgq2Aobyrhw/NekaUpjMA31hM42cRAbg07YGQLIevHuDYj/Nb4q0cOw7VUGIM0RuvI7Z2y5JOKvHEA1xC75stnsN42Fm0CumA0ly9GKz/8fRTI3LxMqlRuQBKVrDvRA7XP3Dbz4iYC8o/Tp1XlsNz6RTTaNAEDXYa9mn/Giu2VG13QjSxSG6g1GgqkZsGog4O5U57cDBdE3Qbkxe+Lja7Q9v4SllOTj2dwzC3grCIIs0K5tXdpuvUMmR407TGjULqATmd58tNCcbdzv5bFav6FGI1vVLKsKAEwpPPV/LI3ZUZDhuZNCb1dkhgM+e02uZDdQffterR3Nj89ar5lMohChQ41mEA3me2/pOc0Ta4uBFgRMwWIhWvJzAcLYFETthQNNtCto8I0zKFFygEkfwbiVTy+qre09rCxxfkG9lJjQ5FTAtambdIODLTDRsPYKWXgXgC05aXu06ZaLgJOwKo9T0VDfhriqwYShrWVCAUOczubvWiUY4zoXSAQSnFK7CysEQ7UQKlYnMHz/+ZO/tcbDBSUc+PyhlB+vJUdbTcvt7B8hdG7aiFs7tGxIyZ+GrJqh7TSUgSrdHheOmIdibp0k3heoFPz3Gu21AuA2rJwfBKzYnAoF4Omtczj41vNStHxqNzByadyJqVR2dN+d6wq1zCO4tcOw=="

runcmd:
 - apt-get update
 - apt-get install -y docker.io
 - systemctl enable --now docker
 - usermod -aG docker Ashiibi
 - docker pull alpine:latest
```
```
"C:\Users\sacha\OneDrive\Documents\cloud-init.txt"
```
